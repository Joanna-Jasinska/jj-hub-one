const e=[{type:"dice",max:"4",min:"1",name:"k4",id:"dicek4"},{type:"dice",max:"6",min:"1",name:"k6",id:"dicek6"},{type:"dice",max:"8",min:"1",name:"k8",id:"dicek8"},{type:"dice",max:"10",min:"1",name:"k10",id:"dicek10"},{type:"dice",max:"12",min:"1",name:"k12",id:"dicek12"},{type:"dice",max:"20",min:"1",name:"k20",id:"dicek20"},{type:"dice",name:"Random Dice",id:"dicerandom"}],t=(e="------------------------------------------------",t=!1)=>(console.log(e),!(!t||!e||"------------------------------------------------"==e)&&e),c={getRandomHexColor:()=>`#${Math.floor(16777215*Math.random()).toString(16).padStart(6,0)}`,getRandom:(e=1,t=1)=>Math.floor(Math.random()*(e+1-t)+t),getRandomDiceMax(e=20,t=4){let c=4,i=20;const n=[4,6,8,10,12,20];return i=n.indexOf(e)+1,c=n.indexOf(t)+1,n[Math.floor(Math.random()*(i+1-c)+c-1)]},getDiceBackgroundColorName(e,t=6,c=1){let i="--dice-bg-color-";return 20==e?i+"mythic":e==c?i+"bad":e==t?i+"perfect":e<=Math.floor((t-c)/5)+c?i+"bad":e>14?i+"epic":e>9?i+"uncommon":i+"medium"}},i={dices:[{id:"dicek20"},{id:"dicek6"},{id:"dicek4"},{id:"dicerandom"},{id:"dicerandom"},{}],items:[{id:"use"},{id:"reroll"},{id:"delete"}]},n={clearData(e=!0){(!e||e&&confirm())&&(log("Clearing local storage"),localStorage.clear())},load(){},save(){},loadObjects(e="dices"){},getIndexFromID:(e="dice",t="")=>0,getObject(e="dice",t=0){},deleteObject(e="dice",t=0){},addObject(e="dice",t=0){},replaceObject(e="dice",t=0,c={}){},getDice(e=0){},overwriteDice(e,t){this.replaceObject("dice",this.getIndexFromID("dice",e),t)},deleteDice(e){this.deleteObject("dice",this.getIndexFromID("dice",e))},loadDices(){this.loadObjects("dices")}},a=(e=[[void 0],void 0])=>{let c=[...e[0]];const i=e[1],n=(e=[])=>(t('action: finished action: "'+e.shift()+'" proceeding with: "'+e[0]+'"'),"action"!=e[0]);switch(t(`action: proceeding with actions: ${c}`),c[0]){case void 0:break;case"deselectdices":if(n(c),isNaN(c[0])){let e=document.querySelector(".dice.selected");for(d in e)o.deselectDiceDice(d)}else for(let e=0;e<parseInt(c[0]);e++){let e=document.querySelector(".dice.selected");o.deselectDiceDice(e)}n(c);case"disabledices":if(n(c),isNaN(c[0])){let e=document.querySelector(".dice.selected");for(d in e)o.deactivateDice(d)}else for(let e=0;e<parseInt(c[0]);e++){let e=document.querySelector(".dice.selected");o.deactivateDice(e)}n(c);case"disableself":l.disableItem(i),n(c);case"rerolldices":if(isNaN(c[0])){t("will reroll all dices");let e=document.querySelectorAll(".dice.selected");for(d of e)t(d),o.rollDice(d)}else for(let e=0;e<parseInt(c[0]);e++){let e=document.querySelector(".dice.selected");o.rollDice(e)}n(c)}return r.clearSelections(),!1},l={clickItem(e){t("onItems: clickItem"),this.selectItem(e)&&this.checkActivation(e)&&(t(`onItems: clickItem - activating activateItem(o), o: ${e}`),this.activateItem(e))},getActions:e=>(t("getActions"),e?[["disabledices",1,"disableself","rerolldices"],e]:[[0],void 0]),checkActivation(e){const c=document.querySelectorAll(".dice.selected").length;t(`onItems: checkActivation: selected dices: ${c}`),t(e),t(e.actions);const i=this.getActions(e);return!!c&&i;
//!!!aaa!!!
},refreshItem(e){e.classList.contains("inactive")&&e.classList.remove("inactive"),this.deselectItem(e)},activateItem(e){t(),t("onItems: activateItem(o), o:"),t(e),t(),e.classList.contains("item")&&(a(this.checkActivation(e)),r.clearSelections(),this.disableItem(e))},selectItem(e){return!e.classList.contains("item")||e.classList.contains("selected")||e.classList.contains("inactive")?this.deselectItem(e):(e.classList.add("selected"),!0)},deselectItem:e=>(e.classList.contains("selected")&&e.classList.remove("selected"),!1),disableItem(e){e.classList.contains("item")&&!e.classList.contains("inactive")&&(e.classList.add("inactive"),this.deselectItem(e))}},o={clickDice(e){if(e)if(e.classList.contains("selected"))this.deselectDice(e);else{this.selectDice(e);let c=document.querySelectorAll(".itemBag>.item.selected");t(),t("onDices: clickDice(o), selectedItems:"),t(c),t(),c.length>0&&l.checkActivation(c[0])&&(l.activateItem(c[0]),r.clearSelections())}},refreshDice(e){e&&(e.classList.contains("inactive")&&e.classList.remove("inactive"),this.deselectDice(e))},rollDice(e){if(!e)return;const t=e.querySelector(".dice__rolled"),i=e.querySelector(".dice__max"),n=parseInt(i.innerText);let s=c.getRandom(n);t.innerText=`${s}`,e.setAttribute("bgcolor",`${c.getDiceBackgroundColorName(s,n)}`),i.innerText=`${n}`},selectDice(e){e&&(e.classList.contains("dice")&&!e.classList.contains("selected")?e.classList.add("selected"):this.deselectDice(e))},deactivateDice(e){e&&e.classList.contains("dice")&&!e.classList.contains("inactive")&&e.classList.add("inactive")},deselectDice(e){e&&e.classList.contains("selected")&&e.classList.remove("selected")},getDiceID:e=>0,deleteDice(e){e&&(n.deleteDice(this.getDiceID(e)),e.remove())}},r={clearDiceBag(){const e=document.querySelector(".diceBag");t("clearDiceBag()"),e.innerText=""},clearItemBag(){const e=document.querySelector(".itemBag");t("clearItemBag()"),e.innerText=""},clearSelections(){const e=document.querySelectorAll(".selected");for(s of e)s.classList.remove("selected")}},m={fetchDice(t="dicerandom"){for(const c of e)if(c.id==t)return c},generateDices(e){t(`_ng-dices-generate generateDices(${e})`);for(const t of e)this.createDice(t)},findNearestDice(e=!1){const t=document.querySelectorAll(".diceBag .dice");if(!e)return!1;for(d in t)if(o.getDiceID(d)==e)return d;return!1},createDice(e){t("_ng_dices_generate"),t(`fetching dice, id: ${e.id}, dice:`);const i=this.fetchDice(e.id);document.querySelector(".diceBag").append(document.createElement("div"));const n=document.querySelectorAll(".diceBag > div")[document.querySelectorAll(".diceBag > div").length-1];n.classList.add(i.type?i.type:"dice","button"),n.append(document.createElement("div"));const s=n.querySelector("div");s.classList.add("dice__rolled");let a=parseInt(i.max)?parseInt(i.max):c.getRandomDiceMax(),l=c.getRandom(a);s.innerText=`${l}`,n.setAttribute("bgcolor",`${c.getDiceBackgroundColorName(l,a)}`),n.prepend(document.createElement("div"));const d=n.querySelector("div");d.classList.add("dice__max"),d.innerText=`${a}`,n.onclick=e=>{e.preventDefault(),o.clickDice(e.currentTarget)}}},u=[{type:"item",name:"Waste\nDice",actions:["disable1dice","action","disableself"],reqDice:!0,minDiceAmount:1,maxDiceAmount:1,reqValue:!1,reqExact:!1,perTurnUses:3,id:"use"},{type:"item",name:"Reroll\nDice",actions:["reroll","use"],reqDice:!0,minDiceAmount:1,maxDiceAmount:1,reqValue:!1,reqExact:!1,minValue:0,maxValue:0,exactValue:0,perTurnUses:1,id:"reroll"},{type:"item",name:"Delete\nDice",actions:["delete","use"],reqDice:!0,minDiceAmount:1,maxDiceAmount:1,reqValue:!1,reqExact:!1,minValue:0,maxValue:0,exactValue:0,perTurnUses:1,id:"delete"}],g={fetchItem(e="use"){for(const t of u)if(t.id==e)return t},generateItems(e){const c=this;t(`generateItems(${e})`);const i=document.querySelector(".itemBag");for(const n of e){t(`fetching item, item: ${n}`),t(n),t(n.id),t(`fetchItem(ii): ${c.fetchItem(n.id)}`);const e=c.fetchItem(n.id);t(e),i.append(document.createElement("div"));const s=document.querySelectorAll(".itemBag > div")[document.querySelectorAll(".itemBag > div").length-1];s.classList.add(e.type?e.type:"item","button"),s.append(document.createElement("div"));const a=s.querySelector("div");a.classList.add("item__name");let d=e.name?e.name:"no\nitem";a.innerText=`${d}`,s.prepend(document.createElement("div"));const o=s.querySelector("div");o.classList.add("item__uses");let r=parseInt(e.perTurnUses)?parseInt(e.perTurnUses):"0";o.innerText=`${r}`,s.onclick=e=>{e.preventDefault(),l.clickItem(e.currentTarget)}}}},D={initiateNewGame(e=newGame){t(`initiateNewGame(newGameState = ${e})`),r.clearItemBag(),r.clearDiceBag(),m.generateDices(e.dices),g.generateItems(e.items),t()}},h={generateMenuButtons(){const e=document.querySelector(".header");t("generateMenuButtons()"),e.append(document.createElement("div"));const c=e.querySelectorAll("div")[e.querySelectorAll("div").length-1];c.classList.add("button-new-game","button"),c.innerText="New\nGame",c.onclick=e=>{e.preventDefault(),D.initiateNewGame(i)},e.append(document.createElement("div"));const n=e.querySelectorAll("div")[e.querySelectorAll("div").length-1];n.classList.add("button-end-turn","button"),n.innerText="End\nTurn",n.onclick=e=>{e.preventDefault();const t=document.querySelectorAll(".dice");for(let e=0;e<t.length;e++)o.refreshDice(t[e]),o.rollDice(t[e]);const c=document.querySelectorAll(".item");for(let e=0;e<c.length;e++)l.refreshItem(c[e])}}};t(),t("-----------page loaded----------"),t(),h.generateMenuButtons(),D.initiateNewGame(i),t(),t("-----------loading finished----------"),t();
//# sourceMappingURL=dice.1ffcefb8.js.map
