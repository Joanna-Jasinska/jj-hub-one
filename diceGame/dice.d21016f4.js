!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},n={},c=t.parcelRequired7c6;null==c&&((c=function(e){if(e in i)return i[e].exports;if(e in n){var t=n[e];delete n[e];var c={id:e,exports:{}};return i[e]=c,t.call(c.exports,c,c.exports),c.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},t.parcelRequired7c6=c),c.register("kMC0W",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return n.default(e)};var i,n=(i=c("8NIkP"))&&i.__esModule?i:{default:i}})),c.register("8NIkP",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}})),c.register("7AJDX",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}})),c.register("8CtQK",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),c.register("auk6i",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(!e)return;if("string"==typeof e)return n.default(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n.default(e,t)};var i,n=(i=c("8NIkP"))&&i.__esModule?i:{default:i}}));var r=[{type:"dice",max:"4",min:"1",name:"k4",id:"dicek4"},{type:"dice",max:"6",min:"1",name:"k6",id:"dicek6"},{type:"dice",max:"8",min:"1",name:"k8",id:"dicek8"},{type:"dice",max:"10",min:"1",name:"k10",id:"dicek10"},{type:"dice",max:"12",min:"1",name:"k12",id:"dicek12"},{type:"dice",max:"20",min:"1",name:"k20",id:"dicek20"},{type:"dice",name:"Random Dice",id:"dicerandom"}],a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"------------------------------------------------",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return console.log(e),!(!t||!e||"------------------------------------------------"==e)&&e},o={getRandomHexColor:function(){return"#".concat(Math.floor(16777215*Math.random()).toString(16).padStart(6,0))},getRandom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.floor(Math.random()*(e+1-t)+t)},getRandomDiceMax:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=4,n=20,c=[4,6,8,10,12,20];n=c.indexOf(e)+1,i=c.indexOf(t)+1;var r=Math.floor(Math.random()*(n+1-i)+i-1);return c[r]},getDiceBackgroundColorName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n="--dice-bg-color-";return 20==e?n+"mythic":e==i?n+"bad":e==t?n+"perfect":e<=Math.floor((t-i)/5)+i?n+"bad":e>14?n+"epic":e>9?n+"uncommon":n+"medium"}},l={dices:[{id:"dicek20"},{id:"dicek6"},{id:"dicek4"},{id:"dicerandom"},{id:"dicerandom"},{}],items:[{id:"use"},{id:"reroll"},{id:"delete"}]},u={clearData:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(!e||e&&confirm())&&(log("Clearing local storage"),localStorage.clear())},load:function(){},save:function(){},loadObjects:function(){},getIndexFromID:function(){var e=0;return e},getObject:function(){},deleteObject:function(){},addObject:function(){},replaceObject:function(){},getDice:function(){},overwriteDice:function(e,t){this.replaceObject("dice",this.getIndexFromID("dice",e),t)},deleteDice:function(e){this.deleteObject("dice",this.getIndexFromID("dice",e))},loadDices:function(){this.loadObjects("dices")}},m={};Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(e){return f.default(e)||v.default(e)||y.default(e)||g.default()};var f=h(c("kMC0W")),v=h(c("7AJDX")),g=h(c("8CtQK")),y=h(c("auk6i"));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[void 0],void 0],i=e(m)(t[0]),n=t[1],c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a('action: finished action: "'+e.shift()+'" proceeding with: "'+e[0]+'"'),"action"!=e[0]};switch(a("action: proceeding with actions: ".concat(i)),i[0]){case void 0:break;case"deselectdices":if(c(i),isNaN(i[0])){var r=document.querySelector(".dice.selected");for(d in r)x.deselectDiceDice(d)}else for(var o=0;o<parseInt(i[0]);o++){var l=document.querySelector(".dice.selected");x.deselectDiceDice(l)}c(i);case"disabledices":if(c(i),isNaN(i[0])){var s=document.querySelector(".dice.selected");for(d in s)x.deactivateDice(d)}else for(var u=0;u<parseInt(i[0]);u++){var f=document.querySelector(".dice.selected");x.deactivateDice(f)}c(i);case"disableself":D.disableItem(n),c(i);case"rerolldices":if(isNaN(i[0])){a("will reroll all dices");var v=document.querySelectorAll(".dice.selected"),g=!0,y=!1,h=void 0;try{for(var p,b=v[Symbol.iterator]();!(g=(p=b.next()).done);g=!0)d=p.value,a(d),x.rollDice(d)}catch(e){y=!0,h=e}finally{try{g||null==b.return||b.return()}finally{if(y)throw h}}}else for(var S=0;S<parseInt(i[0]);S++){var k=document.querySelector(".dice.selected");x.rollDice(k)}c(i)}return I.clearSelections(),!1},D={clickItem:function(e){a("onItems: clickItem"),this.selectItem(e)&&this.checkActivation(e)&&(a("onItems: clickItem - activating activateItem(o), o: ".concat(e)),this.activateItem(e))},getActions:function(e){return a("getActions"),e?[["disabledices",1,"disableself","rerolldices"],e]:[[0],void 0]},checkActivation:function(e){var t=document.querySelectorAll(".dice.selected").length;a("onItems: checkActivation: selected dices: ".concat(t)),a(e),a(e.actions);var i=this.getActions(e);return!!t&&i;
//!!!aaa!!!
},refreshItem:function(e){e.classList.contains("inactive")&&e.classList.remove("inactive"),this.deselectItem(e)},activateItem:function(e){a(),a("onItems: activateItem(o), o:"),a(e),a(),e.classList.contains("item")&&(p(this.checkActivation(e)),I.clearSelections(),this.disableItem(e))},selectItem:function(e){return!e.classList.contains("item")||e.classList.contains("selected")||e.classList.contains("inactive")?this.deselectItem(e):(e.classList.add("selected"),!0)},deselectItem:function(e){return e.classList.contains("selected")&&e.classList.remove("selected"),!1},disableItem:function(e){e.classList.contains("item")&&!e.classList.contains("inactive")&&(e.classList.add("inactive"),this.deselectItem(e))}},x={clickDice:function(e){if(e)if(e.classList.contains("selected"))this.deselectDice(e);else{this.selectDice(e);var t=document.querySelectorAll(".itemBag>.item.selected");a(),a("onDices: clickDice(o), selectedItems:"),a(t),a(),t.length>0&&D.checkActivation(t[0])&&(D.activateItem(t[0]),I.clearSelections())}},refreshDice:function(e){e&&(e.classList.contains("inactive")&&e.classList.remove("inactive"),this.deselectDice(e))},rollDice:function(e){if(e){var t=e.querySelector(".dice__rolled"),i=e.querySelector(".dice__max"),n=parseInt(i.innerText),c=o.getRandom(n);t.innerText="".concat(c),e.setAttribute("bgcolor","".concat(o.getDiceBackgroundColorName(c,n))),i.innerText="".concat(n)}},selectDice:function(e){e&&(e.classList.contains("dice")&&!e.classList.contains("selected")?e.classList.add("selected"):this.deselectDice(e))},deactivateDice:function(e){e&&e.classList.contains("dice")&&!e.classList.contains("inactive")&&e.classList.add("inactive")},deselectDice:function(e){e&&e.classList.contains("selected")&&e.classList.remove("selected")},getDiceID:function(e){return 0},deleteDice:function(e){e&&(u.deleteDice(this.getDiceID(e)),e.remove())}},I={clearDiceBag:function(){var e=document.querySelector(".diceBag");a("clearDiceBag()"),e.innerText=""},clearItemBag:function(){var e=document.querySelector(".itemBag");a("clearItemBag()"),e.innerText=""},clearSelections:function(){var e=document.querySelectorAll(".selected"),t=!0,i=!1,n=void 0;try{for(var c,r=e[Symbol.iterator]();!(t=(c=r.next()).done);t=!0)s=c.value,s.classList.remove("selected")}catch(e){i=!0,n=e}finally{try{t||null==r.return||r.return()}finally{if(i)throw n}}}},b={fetchDice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dicerandom",t=!0,i=!1,n=void 0;try{for(var c,a=r[Symbol.iterator]();!(t=(c=a.next()).done);t=!0){var o=c.value;if(o.id==e)return o}}catch(e){i=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(i)throw n}}},generateDices:function(e){a("_ng-dices-generate generateDices(".concat(e,")"));var t=!0,i=!1,n=void 0;try{for(var c,r=e[Symbol.iterator]();!(t=(c=r.next()).done);t=!0){var o=c.value;this.createDice(o)}}catch(e){i=!0,n=e}finally{try{t||null==r.return||r.return()}finally{if(i)throw n}}},findNearestDice:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=document.querySelectorAll(".diceBag .dice");if(!e)return!1;for(d in t)if(x.getDiceID(d)==e)return d;return!1},createDice:function(e){a("_ng_dices_generate"),a("fetching dice, id: ".concat(e.id,", dice:"));var t=this.fetchDice(e.id);document.querySelector(".diceBag").append(document.createElement("div"));var i=document.querySelectorAll(".diceBag > div")[document.querySelectorAll(".diceBag > div").length-1];i.classList.add(t.type?t.type:"dice","button"),i.append(document.createElement("div"));var n=i.querySelector("div");n.classList.add("dice__rolled");var c=parseInt(t.max)?parseInt(t.max):o.getRandomDiceMax(),r=o.getRandom(c);n.innerText="".concat(r),i.setAttribute("bgcolor","".concat(o.getDiceBackgroundColorName(r,c))),i.prepend(document.createElement("div"));var l=i.querySelector("div");l.classList.add("dice__max"),l.innerText="".concat(c),i.onclick=function(e){e.preventDefault(),x.clickDice(e.currentTarget)}}},S=[{type:"item",name:"Waste\nDice",actions:["disable1dice","action","disableself"],reqDice:!0,minDiceAmount:1,maxDiceAmount:1,reqValue:!1,reqExact:!1,perTurnUses:3,id:"use"},{type:"item",name:"Reroll\nDice",actions:["reroll","use"],reqDice:!0,minDiceAmount:1,maxDiceAmount:1,reqValue:!1,reqExact:!1,minValue:0,maxValue:0,exactValue:0,perTurnUses:1,id:"reroll"},{type:"item",name:"Delete\nDice",actions:["delete","use"],reqDice:!0,minDiceAmount:1,maxDiceAmount:1,reqValue:!1,reqExact:!1,minValue:0,maxValue:0,exactValue:0,perTurnUses:1,id:"delete"}],k={fetchItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"use",t=!0,i=!1,n=void 0;try{for(var c,r=S[Symbol.iterator]();!(t=(c=r.next()).done);t=!0){var a=c.value;if(a.id==e)return a}}catch(e){i=!0,n=e}finally{try{t||null==r.return||r.return()}finally{if(i)throw n}}},generateItems:function(e){a("generateItems(".concat(e,")"));var t=document.querySelector(".itemBag"),i=!0,n=!1,c=void 0;try{for(var r,o=e[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var l=r.value;a("fetching item, item: ".concat(l)),a(l),a(l.id),a("fetchItem(ii): ".concat(this.fetchItem(l.id)));var d=this.fetchItem(l.id);a(d),t.append(document.createElement("div"));var s=document.querySelectorAll(".itemBag > div")[document.querySelectorAll(".itemBag > div").length-1];s.classList.add(d.type?d.type:"item","button"),s.append(document.createElement("div"));var u=s.querySelector("div");u.classList.add("item__name");var m=d.name?d.name:"no\nitem";u.innerText="".concat(m),s.prepend(document.createElement("div"));var f=s.querySelector("div");f.classList.add("item__uses");var v=parseInt(d.perTurnUses)?parseInt(d.perTurnUses):"0";f.innerText="".concat(v),s.onclick=function(e){e.preventDefault(),D.clickItem(e.currentTarget)}}}catch(e){n=!0,c=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw c}}}},q={initiateNewGame:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:newGame;a("initiateNewGame(newGameState = ".concat(e,")")),I.clearItemBag(),I.clearDiceBag(),b.generateDices(e.dices),k.generateItems(e.items),a()}},A={generateMenuButtons:function(){var e=document.querySelector(".header");a("generateMenuButtons()"),e.append(document.createElement("div"));var t=e.querySelectorAll("div")[e.querySelectorAll("div").length-1];t.classList.add("button-new-game","button"),t.innerText="New\nGame",t.onclick=function(e){e.preventDefault(),q.initiateNewGame(l)},e.append(document.createElement("div"));var i=e.querySelectorAll("div")[e.querySelectorAll("div").length-1];i.classList.add("button-end-turn","button"),i.innerText="End\nTurn",i.onclick=function(e){e.preventDefault();for(var t=document.querySelectorAll(".dice"),i=0;i<t.length;i++)x.refreshDice(t[i]),x.rollDice(t[i]);for(var n=document.querySelectorAll(".item"),c=0;c<n.length;c++)D.refreshItem(n[c])}}};a(),a("-----------page loaded----------"),a(),A.generateMenuButtons(),q.initiateNewGame(l),a(),a("-----------loading finished----------"),a()}();
//# sourceMappingURL=dice.d21016f4.js.map
