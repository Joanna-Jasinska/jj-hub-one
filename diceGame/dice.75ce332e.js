const e=[{type:"dice",max:"4",min:"1",name:"k4",id:"dicek4"},{type:"dice",max:"6",min:"1",name:"k6",id:"dicek6"},{type:"dice",max:"8",min:"1",name:"k8",id:"dicek8"},{type:"dice",max:"10",min:"1",name:"k10",id:"dicek10"},{type:"dice",max:"12",min:"1",name:"k12",id:"dicek12"},{type:"dice",max:"20",min:"1",name:"k20",id:"dicek20"},{type:"dice",name:"Random Dice",id:"dicerandom"}],t=(e="------------------------------------------------")=>{console.log(e)},c={getRandomHexColor:()=>`#${Math.floor(16777215*Math.random()).toString(16).padStart(6,0)}`,getRandom:(e=1,t=1)=>Math.floor(Math.random()*(e+1-t)+t),getRandomDiceMax(e=20,t=4){let c=4,i=20;const n=[4,6,8,10,12,20];return i=n.indexOf(e)+1,c=n.indexOf(t)+1,n[Math.floor(Math.random()*(i+1-c)+c-1)]},getDiceBackgroundColor(e,t=6,c=1){let i="#ffcc99";return 20==e?"#00ffff":e==c?i:e==t?"#00ff00":e<=Math.floor((t-c)/5)+c?i:e>14?"#ff66ff":e>9?"#cfff9f":"#ffffbb"},getDiceBackgroundColorName(e,t=6,c=1){let i="--dice-bg-color-";return 20==e?i+"mythic":e==c?i+"bad":e==t?i+"perfect":e<=Math.floor((t-c)/5)+c?i+"bad":e>14?i+"epic":e>9?i+"uncommon":i+"medium"}},i={dices:[{id:"dicek20"},{id:"dicek6"},{id:"dicek4"},{id:"dicerandom"},{id:"dicerandom"},{}],items:[{id:"use"},{id:"reroll"},{}]},n={refreshDice(e){e.classList.contains("inactive")&&e.classList.remove("inactive"),this.deselectDice(e)},rollDice(e){const t=e.querySelector(".dice__rolled"),i=e.querySelector(".dice__max"),n=parseInt(i.innerText);let a=c.getRandom(n);t.innerText=`${a}`,e.setAttribute("bgcolor",`${c.getDiceBackgroundColorName(a,n)}`),i.innerText=`${n}`},selectDice(e){e.classList.contains("dice")&&!e.classList.contains("selected")?e.classList.add("selected"):this.deselectDice(e)},deactivateDice(e){e.classList.contains("dice")&&!e.classList.contains("inactive")&&e.classList.add("inactive")},deselectDice(e){e.classList.contains("selected")&&e.classList.remove("selected")}},a={checkActivation:e=>!1,refreshItem(e){e.classList.contains("inactive")&&e.classList.remove("inactive"),this.deselectItem(e)},activateItem(e){e.classList.contains("item")&&!e.classList.contains("selected")?(e.classList.add("selected"),this.checkActivation(e)&&r.clearSelections()):this.deselectItem(e)},deselectItem(e){e.classList.contains("selected")&&e.classList.remove("selected")},deactivateItem(e){e.classList.contains("item")&&!e.classList.contains("inactive")&&e.classList.add("inactive")}},r={clearDiceBag(){const e=document.querySelector(".diceBag");t("clearDiceBag()"),e.innerText="",this.generateButtons()},clearItemBag(){const e=document.querySelector(".itemBag");t("clearItemBag()"),e.innerText=""},clearSelections(){const e=document.querySelectorAll(".selected");for(s of e)s.classList.remove("selected")},generateButtons(){const e=document.querySelector(".diceBag");t("generateButtons()"),e.prepend(document.createElement("div"));const c=e.querySelector("div");c.classList.add("button-new-game","button"),c.innerText="New\nGame",c.onclick=e=>{e.preventDefault(),u.initiateNewGame(i)},e.prepend(document.createElement("div"));const s=e.querySelector("div");s.classList.add("button-end-turn","button"),s.innerText="End\nTurn",s.onclick=e=>{e.preventDefault();const t=document.querySelectorAll(".dice");for(let e=0;e<t.length;e++)n.refreshDice(t[e]),n.rollDice(t[e]);const c=document.querySelectorAll(".item");for(let e=0;e<c.length;e++)a.refreshItem(c[e])}}},o={fetchDice(t="dicerandom"){for(d of e)if(d.id==t)return d},generateDices(e){const i=this;t(`generateDices(${e})`);const a=document.querySelector(".diceBag");for(const s of e){t(`fetching dice, dice: ${s}`),t(s),t(s.id),t(`fetchDice(di): ${i.fetchDice(s.id)}`);const e=i.fetchDice(s.id);a.append(document.createElement("div"));const d=document.querySelectorAll(".diceBag > div")[document.querySelectorAll(".diceBag > div").length-1];d.classList.add(e.type?e.type:"dice","button"),d.append(document.createElement("div"));const r=d.querySelector("div");r.classList.add("dice__rolled");let o=parseInt(e.max)?parseInt(e.max):c.getRandomDiceMax(),l=c.getRandom(o);r.innerText=`${l}`,d.setAttribute("bgcolor",`${c.getDiceBackgroundColorName(l,o)}`),d.prepend(document.createElement("div"));const m=d.querySelector("div");m.classList.add("dice__max"),m.innerText=`${o}`,d.onclick=e=>{e.preventDefault(),n.selectDice(e.currentTarget)}}}},l=[{type:"item",name:"Waste\nDice",actions:["use"],reqDice:!0,minDiceAmount:1,maxDiceAmount:1,reqValue:!1,reqExact:!1,perTurnUses:3,id:"use"},{type:"item",name:"Reroll\nDice",actions:["reroll","use"],reqDice:!0,minDiceAmount:1,maxDiceAmount:1,reqValue:!1,reqExact:!1,minValue:0,maxValue:0,exactValue:0,perTurnUses:1,id:"reroll"}],m={fetchItem(e="use"){for(itm of l)if(itm.id==e)return itm},generateItems(e){const c=this;t(`generateItems(${e})`);const i=document.querySelector(".itemBag");for(const n of e){t(`fetching item, item: ${n}`),t(n),t(n.id),t(`fetchItem(ii): ${c.fetchItem(n.id)}`);const e=c.fetchItem(n.id);t(e),i.append(document.createElement("div"));const s=document.querySelectorAll(".itemBag > div")[document.querySelectorAll(".itemBag > div").length-1];s.classList.add(e.type?e.type:"item","button"),s.append(document.createElement("div"));const d=s.querySelector("div");d.classList.add("item__name");let r=e.name?e.name:"no\nitem";d.innerText=`${r}`,s.prepend(document.createElement("div"));const o=s.querySelector("div");o.classList.add("item__uses");let l=parseInt(e.perTurnUses)?parseInt(e.perTurnUses):"0";o.innerText=`${l}`,s.onclick=e=>{e.preventDefault(),a.activateItem(e.currentTarget)}}}},u={initiateNewGame(e=newGame){t(`initiateNewGame(newGameState = ${e})`),r.clearItemBag(),r.clearDiceBag(),o.generateDices(e.dices),m.generateItems(e.items),t()}};t(),t("-----------page loaded----------"),t(),u.initiateNewGame(i);
//# sourceMappingURL=dice.75ce332e.js.map
